
on: push

name: Jira Example issue

jobs:
  build:
    runs-on: ubuntu-latest
    name: Jira Example
    steps:
    - name: Login
      uses: atlassian/gajira-login@master
      env:
        JIRA_BASE_URL: ${{ secrets.JIRA_BASE_URL }}
        JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}
        JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}

    - name: Jira Create issue
      id: create
      uses: atlassian/gajira-create@v2.0.1
      with:
        project: ITP
        issuetype: Task
        summary: |
          Build completed for ${{ github.repository }} and Build has been ${{ job.status }}
        description: |
          Created automatically via GitHub Actions
        fields: '{"assignee": {"accountId": "62679d67fff19d006926866c"}}'

    - name: Log created issue
      run: echo "Issue ${{ steps.create.outputs.issue }} was created"

    - name: Send mail
      if: always()
      uses: dawidd6/action-send-mail@v3
      with:
        # mail server settings
        server_address: smtp.gmail.com
        server_port: 465
        # Optional (recommended): mail server username:
        username: ${{secrets.MAIL_USERNAME}}
        # Optional (recommended) mail server password:
        password: ${{secrets.MAIL_PASSWORD}}
        # email subject
        subject: ${{ github.job }} job of ${{ github.repository }} has ${{ job.status }}
        # email body as text
        body: ${{ github.job }} job in worflow ${{ github.workflow }} of ${{ github.repository }} has ${{ job.status }}
        # comma-separated string, send email to
        to: sahayasilviya27@gmail.com,roachleva06@gmail.com
        # from email name
        from: Jira Admin



# name: Build

# on:
#   push:
#     branches: main

# jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v2

#       - name: Hello World
#         run: echo Hello, world! && exit 1
#       - name: Send mail
#         if: always()
#         uses: dawidd6/action-send-mail@v2
#         with:
#           # mail server settings
#           server_address: smtp.office365.com
#           server_port: 465
#           # user credentials
#           username: ${{ secrets.EMAIL_USERNAME }}
#           password: ${{ secrets.EMAIL_PASSWORD }}
#           # email subject
#           subject: ${{ github.job }} job of ${{ github.repository }} has ${{ job.status }}
#           # email body as text
#           body: ${{ github.job }} job in worflow ${{ github.workflow }} of ${{ github.repository }} has ${{ job.status }}
#           # comma-separated string, send email to
#           to: roach.amalraj@icumed.com,doejohn@gmail.com
#           # from email name
#           from: Innovation JIRA Admin


















# name: Super-Linter

# on: push

# jobs:
#   super-lint:
#     name: Lint code base
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v2

#       - name: Run Super-Linter
#         uses: github/super-linter@v3
#         env:
#           DEFAULT_BRANCH: main
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}


# name: Demo-test-Jira-GitHub
# on: [push]
# jobs:
#   Explore-GitHub-Actions:
#     runs-on: ubuntu-latest
#     steps:
#       - run: echo "The job was automatically triggered by a ${{ github.event_name }} event."
#       - run: echo "This job is now running on a ${{ runner.os }} server hosted by GitHub!"
#       - run: echo "The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
#       - name: Check out repository code
#         uses: actions/checkout@v3
#       - run: echo "The ${{ github.repository }} repository has been cloned to the runner."
#       - run: echo "The workflow is now ready to test your code on the runner."
#       - name: List files in the repository
#         run: |
#           ls ${{ github.workspace }}
#       - run: echo "This job's status is ${{ job.status }}."
